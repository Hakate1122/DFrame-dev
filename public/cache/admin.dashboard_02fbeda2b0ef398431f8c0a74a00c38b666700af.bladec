<!DOCTYPE html>
<html lang="vi">

<head>
 <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>Admin Dashboard | Ứng dụng đọc truyện</title>

 <!-- Bootstrap 3.4.1 -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
 <!-- Optional: Font -->
 <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
 <style>
 body {
 font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
 background: #f5f7fb;
 }

 .navbar-inverse {
 background: #1f2937;
 border-color: #111827;
 }

 .navbar-inverse .navbar-brand {
 color: #fff;
 font-weight: 700;
 }

 .navbar-inverse .navbar-nav>li>a {
 color: #d1d5db;
 }

 .sidebar {
 background: #111827;
 position: fixed;
 top: 50px;
 bottom: 0;
 left: 0;
 width: 230px;
 padding-top: 15px;
 overflow-y: auto;
 }

 .sidebar a {
 color: #9ca3af;
 display: block;
 padding: 10px 15px;
 border-left: 3px solid transparent;
 }

 .sidebar a:hover,
 .sidebar a.active {
 color: #fff;
 background: #0b1220;
 border-left-color: #3b82f6;
 text-decoration: none;
 }

 .main {
 margin-left: 230px;
 padding: 20px;
 margin-top: 30px;
 }

 .page-header {
 margin-top: 0;
 }

 .panel {
 border-radius: 10px;
 border: 1px solid #e5e7eb;
 box-shadow: 0 1px 2px rgba(0, 0, 0, .04);
 }

 .panel-heading {
 border-top-left-radius: 10px;
 border-top-right-radius: 10px;
 }

 .stat {
 display: flex;
 align-items: center;
 }

 .stat .icon {
 width: 44px;
 height: 44px;
 border-radius: 8px;
 background: #eef2ff;
 display: flex;
 align-items: center;
 justify-content: center;
 margin-right: 12px;
 }

 .label-soft {
 background: #eef2ff;
 color: #3730a3;
 }

 .table>thead>tr>th {
 background: #f9fafb;
 color: #374151;
 border-bottom: 1px solid #e5e7eb;
 }

 .badge-status {
 border-radius: 20px;
 padding: 6px 10px;
 }

 .footer {
 padding: 20px 0;
 color: #6b7280;
 }

 .search-input {
 max-width: 360px;
 }

 /* Small screens: make sidebar collapsible */
 @media (max-width: 991px) {
 .sidebar {
 left: -230px;
 transition: left .2s ease;
 }

 .sidebar.open {
 left: 0;
 z-index: 1030;
 }

 .main {
 margin-left: 0;
 }

 .navbar-toggle-sidebar {
 display: inline-block;
 margin-right: 10px;
 }
 }

 @media (min-width: 992px) {
 .navbar-toggle-sidebar {
 display: none;
 }
 }
 </style>
</head>

<body>
 <!-- Top Navbar -->
 <nav class="navbar navbar-inverse navbar-fixed-top">
 <div class="container-fluid">
 <div class="navbar-header">
 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-nav-collapse">
 <span class="sr-only">Toggle navigation</span>
 <span class="icon-bar"></span>
 <span class="icon-bar"></span>
 <span class="icon-bar"></span>
 </button>
 <button type="button" class="btn btn-default navbar-btn navbar-toggle-sidebar" id="btnToggleSidebar">
 <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
 </button>
 <a class="navbar-brand" href="#">TruyenAdmin</a>
 </div>

 <div class="collapse navbar-collapse" id="top-nav-collapse">
 <form class="navbar-form navbar-left" role="search">
 <div class="form-group search-input">
 <input type="text" class="form-control" placeholder="Tìm kiếm truyện, tác giả, người dùng...">
 </div>
 <button type="submit" class="btn btn-primary">Tìm</button>
 </form>
 <ul class="nav navbar-nav navbar-right">
 <li><a href="#"><span class="glyphicon glyphicon-bell"></span> Thông báo <span class="badge">3</span></a></li>
 <li class="dropdown">
 <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
 aria-expanded="false">
 <span class="glyphicon glyphicon-user"></span> Admin <span class="caret"></span>
 </a>
 <ul class="dropdown-menu">
 <li><a href="#">Hồ sơ</a></li>
 <li><a href="#">Cài đặt</a></li>
 <li role="separator" class="divider"></li>
 <li><a href="<?= route('admin.logout') ?>">Đăng xuất</a></li>
 </ul>
 </li>
 </ul>
 </div>
 </div>
 </nav>

 <!-- Sidebar -->
 <div class="sidebar" id="sidebar">
 <a href="#" class="active"><span class="glyphicon glyphicon-dashboard"></span> Tổng quan</a>
 <a href="#section-stories"><span class="glyphicon glyphicon-book"></span> Truyện</a>
 <a href="#section-categories"><span class="glyphicon glyphicon-tags"></span> Thể loại</a>
 <a href="#section-users"><span class="glyphicon glyphicon-user"></span> Người dùng</a>
 <a href="#section-settings"><span class="glyphicon glyphicon-cog"></span> Cấu hình</a>
 </div>

 <!-- Main -->
 <div class="main" style="margin-top: 30px;">
 <div class="page-header">
 <h3 class="text-primary" style="margin-top:10px;">Bảng điều khiển</h3>
 <p class="text-muted">Tổng quan hoạt động hệ thống đọc truyện</p>
 </div>

 <!-- Stats Row -->
 <div class="row">
 <div class="col-sm-6 col-md-3">
 <div class="panel panel-default">
 <div class="panel-body stat">
 <div class="icon"><span class="glyphicon glyphicon-book"></span></div>
 <div>
 <div class="h4" id="statStories">4,520</div>
 <div class="text-muted">Tổng số truyện</div>
 </div>
 </div>
 <div class="panel-footer">
 <span class="label label-soft">+120 tuần này</span>
 </div>
 </div>
 </div>
 <div class="col-sm-6 col-md-3">
 <div class="panel panel-default">
 <div class="panel-body stat">
 <div class="icon"><span class="glyphicon glyphicon-list-alt"></span></div>
 <div>
 <div class="h4" id="statChapters">128,340</div>
 <div class="text-muted">Tổng số chương</div>
 </div>
 </div>
 <div class="panel-footer">
 <span class="label label-soft">+2,340 tháng này</span>
 </div>
 </div>
 </div>
 <div class="col-sm-6 col-md-3">
 <div class="panel panel-default">
 <div class="panel-body stat">
 <div class="icon"><span class="glyphicon glyphicon-user"></span></div>
 <div>
 <div class="h4" id="statUsers">86,912</div>
 <div class="text-muted">Người dùng</div>
 </div>
 </div>
 <div class="panel-footer">
 <span class="label label-soft">+1,204 hôm nay</span>
 </div>
 </div>
 </div>
 <div class="col-sm-6 col-md-3">
 <div class="panel panel-default">
 <div class="panel-body stat">
 <div class="icon"><span class="glyphicon glyphicon-fire"></span></div>
 <div>
 <div class="h4" id="statViews">1,245,331</div>
 <div class="text-muted">Lượt đọc 30 ngày</div>
 </div>
 </div>
 <div class="panel-footer">
 <div class="progress" style="margin-bottom:0; height:10px;">
 <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="65" aria-valuemin="0"
 aria-valuemax="100" style="width: 65%"></div>
 </div>
 </div>
 </div>
 </div>
 </div>

 <!-- Traffic & Upload queue -->
 <div class="row">
 <div class="col-md-8">
 <div class="panel panel-default">
 <div class="panel-heading"><strong>Xu hướng đọc</strong> <span class="text-muted">(7 ngày)</span></div>
 <div class="panel-body">
 <canvas id="chartTraffic" height="120"></canvas>
 </div>
 </div>
 </div>
 <div class="col-md-4">
 <div class="panel panel-default">
 <div class="panel-heading"><strong>Hàng đợi duyệt</strong></div>
 <ul class="list-group" id="queueList">
 <li class="list-group-item">
 <span class="badge">3</span>
 <span class="glyphicon glyphicon-time"></span> Truyện chờ duyệt
 </li>
 <li class="list-group-item">
 <span class="badge">1</span>
 <span class="glyphicon glyphicon-warning-sign"></span> Báo lỗi chính tả
 </li>
 <li class="list-group-item">
 <span class="badge">2</span>
 <span class="glyphicon glyphicon-flag"></span> Nội dung vi phạm
 </li>
 </ul>
 <div class="panel-footer text-right">
 <button class="btn btn-xs btn-default">Xem tất cả</button>
 </div>
 </div>
 </div>
 </div>

 <!-- Stories Table -->
 <div class="row" id="section-stories">
 <div class="col-md-12">
 <div class="panel panel-default">
 <div class="panel-heading">
 <div class="row">
 <div class="col-sm-6"><strong>Quản lý truyện</strong></div>
 <div class="col-sm-6 text-right">
 <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#modalCreateStory">
 <span class="glyphicon glyphicon-plus"></span> Thêm truyện
 </button>
 <button class="btn btn-light btn-sm" data-toggle="modal">
 <span class="glyphicon glyphicon-list"></span> Danh sách truyện
 </button>
 </div>
 </div>
 </div>
 <div class="panel-body">
 <div class="row" style="margin-bottom:10px;">
 <div class="col-sm-3">
 <input type="text" id="filterTitle" class="form-control" placeholder="Lọc theo tiêu đề">
 </div>
 <div class="col-sm-3">
 <select class="form-control" id="filterCategory">
 <option value="">-- Thể loại --</option>
 <option>Huyền huyễn</option>
 <option>Đô thị</option>
 <option>Ngôn tình</option>
 <option>Hài hước</option>
 </select>
 </div>
 <div class="col-sm-3">
 <select class="form-control" id="filterStatus">
 <option value="">-- Trạng thái --</option>
 <option>Đang ra</option>
 <option>Hoàn thành</option>
 <option>Tạm dừng</option>
 </select>
 </div>
 <div class="col-sm-3 text-right">
 <button class="btn btn-default" id="btnResetFilter">Đặt lại</button>
 </div>
 </div>
 <div class="table-responsive">
 <table class="table table-hover">
 <thead>
 <tr>
 <th>#</th>
 <th>Tiêu đề</th>
 <th>Tác giả</th>
 <th>Thể loại</th>
 <th>Chương</th>
 <th>Trạng thái</th>
 <th>Cập nhật</th>
 <th class="text-right">Hành động</th>
 </tr>
 </thead>
 <tbody id="storiesTable">
 <!-- Sample rows -->
 <tr>
 <td>1</td>
 <td><a href="#">Vạn Cổ Thần Đế</a></td>
 <td>Phi Thiên</td>
 <td><span class="label label-info">Huyền huyễn</span></td>
 <td>1320</td>
 <td><span class="badge badge-status" style="background:#DCFCE7;color:#166534;">Đang ra</span></td>
 <td>2025-08-28</td>
 <td class="text-right">
 <div class="btn-group">
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-edit"></span></button>
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-stats"></span></button>
 <button class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-trash"></span></button>
 </div>
 </td>
 </tr>
 <tr>
 <td>2</td>
 <td><a href="#">Thần Đạo Đan Tôn</a></td>
 <td>Cổn Khai</td>
 <td><span class="label label-info">Huyền huyễn</span></td>
 <td>1567</td>
 <td><span class="badge badge-status" style="background:#DBEAFE;color:#1E40AF;">Hoàn thành</span>
 </td>
 <td>2025-08-22</td>
 <td class="text-right">
 <div class="btn-group">
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-edit"></span></button>
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-stats"></span></button>
 <button class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-trash"></span></button>
 </div>
 </td>
 </tr>
 <tr>
 <td>3</td>
 <td><a href="#">Thanh Niên Nghiêm Túc</a></td>
 <td>Lão Cửu</td>
 <td><span class="label label-info">Đô thị</span></td>
 <td>423</td>
 <td><span class="badge badge-status" style="background:#FEF9C3;color:#854D0E;">Tạm dừng</span></td>
 <td>2025-08-15</td>
 <td class="text-right">
 <div class="btn-group">
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-edit"></span></button>
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-stats"></span></button>
 <button class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-trash"></span></button>
 </div>
 </td>
 </tr>
 </tbody>
 </table>
 </div>
 <!-- Pagination -->
 <nav aria-label="Page navigation" class="text-center">
 <ul class="pagination pagination-sm">
 <li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
 <li class="active"><a href="#">1</a></li>
 <li><a href="#">2</a></li>
 <li><a href="#">3</a></li>
 <li><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
 </ul>
 </nav>
 </div>
 </div>
 </div>
 </div>

 <!-- Users, Authors & Categories -->
 <div class="row" id="section-users">
 <div class="col-md-6">
 <div class="panel panel-default">
 <div class="panel-heading">
 <strong>Người dùng mới</strong>
 <a class="btn btn-xs btn-info pull-right btn-list-users" href="<?= route('admin.users.list') ?>">
 <span class="glyphicon glyphicon-list"></span> Xem tất cả
 </a>
 </div>
 <ul class="list-group">
 <li class="list-group-item"><span class="glyphicon glyphicon-user"></span> minhtri97 <span
 class="text-muted">· 5 phút trước</span></li>
 <li class="list-group-item"><span class="glyphicon glyphicon-user"></span> thanhhoa <span
 class="text-muted">· 30 phút trước</span></li>
 <li class="list-group-item"><span class="glyphicon glyphicon-user"></span> yennhi <span class="text-muted">·
 1 giờ trước</span></li>
 </ul>
 </div>
 </div>
 <div class="col-md-6" id="section-categories">
 <div class="panel panel-default">
 <div class="panel-heading"><strong>Thể loại phổ biến</strong>
 <a class="btn btn-xs btn-info pull-right btn-list-users" href="<?= route('admin.genres.list') ?>">
 <span class="glyphicon glyphicon-list"></span> Xem tất cả
 </a>
 </div>
 <div class="panel-body">
 <div class="row">
 <div class="col-xs-6">
 <div>Huyền huyễn</div>
 <div class="progress">
 <div class="progress-bar" style="width: 70%">70%</div>
 </div>
 </div>
 <div class="col-xs-6">
 <div>Đô thị</div>
 <div class="progress">
 <div class="progress-bar" style="width: 45%">45%</div>
 </div>
 </div>
 <div class="col-xs-6">
 <div>Ngôn tình</div>
 <div class="progress">
 <div class="progress-bar" style="width: 55%">55%</div>
 </div>
 </div>
 <div class="col-xs-6">
 <div>Hài hước</div>
 <div class="progress">
 <div class="progress-bar" style="width: 30%">30%</div>
 </div>
 </div>
 </div>
 </div>
 </div>
 </div>
 <div class="col-md-6">
 <div class="panel panel-default">
 <div class="panel-heading">
 <strong>Tác giả nổi bật</strong>
 <a class="btn btn-xs btn-info pull-right btn-list-authors" href="<?= route('admin.authors.list') ?>">
 <span class="glyphicon glyphicon-list"></span> Xem tất cả
 </a>
 </div>
 <ul class="list-group">
 <li class="list-group-item"><span class="glyphicon glyphicon-pencil"></span> Nguyễn Nhật Ánh <span class="text-muted">· 10 truyện</span></li>
 <li class="list-group-item"><span class="glyphicon glyphicon-pencil"></span> Hồ Biểu Chánh <span class="text-muted">· 8 truyện</span></li>
 <li class="list-group-item"><span class="glyphicon glyphicon-pencil"></span> Tô Hoài <span class="text-muted">· 5 truyện</span></li>
 </ul>
 </div>
 </div>
 </div>

 <!-- Settings -->
 <div class="row" id="section-settings">
 <div class="col-md-12">
 <div class="panel panel-default">
 <div class="panel-heading"><strong>Cấu hình hệ thống</strong></div>
 <div class="panel-body">
 <form class="form-horizontal">
 <div class="form-group">
 <label class="col-sm-2 control-label">Tên website</label>
 <div class="col-sm-6">
 <input type="text" class="form-control" value="<?= env("APP_NAME", '') ?>" readonly>
 </div>
 </div>
 <div class="form-group">
 <label class="col-sm-2 control-label">Cho phép đăng truyện</label>
 <div class="col-sm-6">
 <label class="checkbox-inline"><input type="checkbox" checked> Thành viên</label>
 <label class="checkbox-inline"><input type="checkbox"> CTV</label>
 </div>
 </div>
 <div class="form-group">
 <label class="col-sm-2 control-label">Chế độ bảo trì</label>
 <div class="col-sm-6">
 <label class="radio-inline"><input type="radio" name="maintenance"> Bật</label>
 <label class="radio-inline"><input type="radio" name="maintenance" checked> Tắt</label>
 </div>
 </div>
 <div class="form-group">
 <div class="col-sm-offset-2 col-sm-6">
 <button type="button" class="btn btn-success"><span class="glyphicon glyphicon-floppy-disk"></span>
 Lưu thay đổi</button>
 </div>
 </div>
 </form>
 </div>
 </div>
 </div>
 </div>

 <!-- Footer -->
 <div class="footer text-center">
 <small>© 2025 TruyenAdmin. Build on Bootstrap 3.</small>
 </div>
 </div>

 <!-- Create Story Modal -->
 <div class="modal fade" id="modalCreateStory" tabindex="-1" role="dialog">
 <div class="modal-dialog">
 <div class="modal-content">
 <div class="modal-header">
 <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
 aria-hidden="true">&times;</span></button>
 <h4 class="modal-title">Thêm truyện mới</h4>
 </div>
 <div class="modal-body">
 <form id="formCreateStory">
 <div class="form-group">
 <label>Tiêu đề</label>
 <input type="text" class="form-control" name="title" required>
 </div>
 <div class="form-group">
 <label>Tác giả</label>
 <input type="text" class="form-control" name="author" required>
 </div>
 <div class="form-group">
 <label>Thể loại</label>
 <select class="form-control" name="category" required>
 <option value="">-- chọn --</option>
 <option>Huyền huyễn</option>
 <option>Đô thị</option>
 <option>Ngôn tình</option>
 <option>Hài hước</option>
 </select>
 </div>
 <div class="form-group">
 <label>Trạng thái</label>
 <select class="form-control" name="status" required>
 <option>Đang ra</option>
 <option>Hoàn thành</option>
 <option>Tạm dừng</option>
 </select>
 </div>
 </form>
 </div>
 <div class="modal-footer">
 <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
 <button type="button" class="btn btn-primary" id="btnSaveStory">Lưu</button>
 </div>
 </div>
 </div>
 </div>

 <!-- Scripts -->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
 <script>
 // Sidebar toggle on mobile
 (function () {
 var $sidebar = $('#sidebar');
 $('#btnToggleSidebar').on('click', function () {
 $sidebar.toggleClass('open');
 });
 // Close sidebar when clicking outside on small screens
 $(document).on('click', function (e) {
 if ($(window).width() < 992) {
 if (!$(e.target).closest('#sidebar, #btnToggleSidebar').length) {
 $sidebar.removeClass('open');
 }
 }
 });
 })();

 // Simple filter demo (client-side)
 (function () {
 function applyFilter() {
 var q = $('#filterTitle').val().toLowerCase();
 var cat = $('#filterCategory').val();
 var stt = $('#filterStatus').val();
 $('#storiesTable tr').each(function () {
 var $tr = $(this);
 var title = $tr.find('td:nth-child(2)').text().toLowerCase();
 var category = $tr.find('td:nth-child(4)').text().trim();
 var status = $tr.find('td:nth-child(6)').text().trim();
 var ok = true;
 if (q && title.indexOf(q) === -1) ok = false;
 if (cat && category.indexOf(cat) === -1) ok = false;
 if (stt && status.indexOf(stt) === -1) ok = false;
 $tr.toggle(ok);
 });
 }
 $('#filterTitle, #filterCategory, #filterStatus').on('input change', applyFilter);
 $('#btnResetFilter').on('click', function () {
 $('#filterTitle').val('');
 $('#filterCategory').val('');
 $('#filterStatus').val('');
 $('#storiesTable tr').show();
 });
 })();

 // Create story (mock)
 (function () {
 $('#btnSaveStory').on('click', function () {
 var form = $('#formCreateStory')[0];
 if (!form.checkValidity()) {
 $('<input type="submit">').hide().appendTo('#formCreateStory').click().remove();
 return;
 }
 var data = $('#formCreateStory').serializeArray().reduce(function (acc, cur) { acc[cur.name] = cur.value; return acc; }, {});
 var idx = $('#storiesTable tr').length + 1;
 var now = new Date();
 var dateStr = now.getFullYear() + '-' + ('0' + (now.getMonth() + 1)).slice(-2) + '-' + ('0' + now.getDate()).slice(-2);
 var badgeStyle = 'background:#DBEAFE;color:#1E40AF;';
 if (data.status === 'Đang ra') badgeStyle = 'background:#DCFCE7;color:#166534;';
 if (data.status === 'Tạm dừng') badgeStyle = 'background:#FEF9C3;color:#854D0E;';
 var row = [
 '<tr>',
 '<td>' + idx + '</td>',
 '<td><a href="#">' + $('<div>').text(data.title).html() + '</a></td>',
 '<td>' + $('<div>').text(data.author).html() + '</td>',
 '<td><span class="label label-info">' + $('<div>').text(data.category).html() + '</span></td>',
 '<td>0</td>',
 '<td><span class="badge badge-status" style="' + badgeStyle + '">' + data.status + '</span></td>',
 '<td>' + dateStr + '</td>',
 '<td class="text-right"><div class="btn-group">\
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-edit"></span></button>\
 <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-stats"></span></button>\
 <button class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-trash"></span></button></div></td>',
 '</tr>'
 ].join('');
 $('#storiesTable').prepend(row);
 $('#modalCreateStory').modal('hide');
 $('#formCreateStory')[0].reset();
 });
 })();

 // Chart demo
 (function () {
 var ctx = document.getElementById('chartTraffic');
 if (!ctx) return;
 var chart = new Chart(ctx, {
 type: 'line',
 data: {
 labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'],
 datasets: [{
 label: 'Lượt đọc',
 data: [12000, 14000, 13500, 16000, 15000, 19000, 21000],
 fill: false,
 borderWidth: 2,
 pointRadius: 3
 }]
 },
 options: {
 legend: { display: true },
 tooltips: { enabled: true },
 scales: {
 yAxes: [{ ticks: { beginAtZero: false } }],
 xAxes: [{ gridLines: { display: false } }]
 }
 }
 });
 })();
 </script>
</body>

</html>